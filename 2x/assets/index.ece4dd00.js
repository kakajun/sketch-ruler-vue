var le=Object.defineProperty;var q=Object.getOwnPropertySymbols;var ae=Object.prototype.hasOwnProperty,ie=Object.prototype.propertyIsEnumerable;var K=(e,t,o)=>t in e?le(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,Z=(e,t)=>{for(var o in t||(t={}))ae.call(t,o)&&K(e,o,t[o]);if(q)for(var o of q(t))ie.call(t,o)&&K(e,o,t[o]);return e};import{d as W,i as Y,r as d,o as P,c as w,w as D,v as j,a as $,b as g,t as A,n as L,e as b,f as M,g as E,h as I,F,j as ce,k as U,l as T,m as ue,p as G,q as de,s as Q,u as H,x as fe,y as he,z as ve}from"./vendor.b54635f5.js";const me=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function o(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=o(r);fetch(r.href,s)}};me();var pe="./assets/onepuls8-pro.53586ff6.jpg",J="./assets/bg.c9b313c5.jpeg";var N=(e,t)=>{const o=e.__vccOpts||e;for(const[n,r]of t)o[n]=r;return o};const ge=W({name:"LineRuler",props:{index:Number,start:Number,vertical:Boolean,value:Number},emits:["onMouseDown","onRelease","onRemove"],setup(e,{emit:t}){const o=Y("sketch"),{isShowReferLine:n,palette:r,thick:s}=o,l=d(0),a=d(!0);P(()=>{l.value=e.value});const i=f=>{a.value=f>=0},c=w(()=>{const f=(l.value-e.start)*o.scale;i(f);const h=f+"px";return e.vertical?{top:h}:{left:h}}),v=w(()=>{console.log(r==null?void 0:r.lineColor,"palette.lineColor");const f=`1px solid ${r==null?void 0:r.lineColor}`,h=e.vertical?{borderTop:f}:{borderLeft:f},y=n?e.vertical?"ns-resize":"ew-resize":"none";return Z({cursor:y},h)}),m=w(()=>e.vertical?{left:s+"px"}:{top:s+"px"});return{startValue:l,showLine:a,offset:c,borderCursor:v,actionStyle:m,handleDown:f=>{const h=e.vertical?f.clientY:f.clientX,y=l.value;t("onMouseDown");const _=R=>{const C=e.vertical?R.clientY:R.clientX,B=Math.round(y+(C-h)/o.scale);l.value=B},S=()=>{t("onRelease",l.value,e.index),document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",S)};document.addEventListener("mousemove",_),document.addEventListener("mouseup",S)},handleRemove:()=>{t("onRemove",e.index)}}}}),we={class:"value"};function ye(e,t,o,n,r,s){return D((b(),$("div",{class:"line",style:L([e.offset,e.borderCursor]),onMousedown:t[1]||(t[1]=(...l)=>e.handleDown&&e.handleDown(...l))},[g("div",{class:"action",style:L(e.actionStyle)},[g("span",{class:"del",onClick:t[0]||(t[0]=(...l)=>e.handleRemove&&e.handleRemove(...l))},"\xD7"),g("span",we,A(e.startValue),1)],4)],36)),[[j,e.showLine]])}var _e=N(ge,[["render",ye],["__scopeId","data-v-60f7d99b"]]);const Se=e=>e<=.25?40:e<=.5?20:e<=1?10:e<=2?5:e<=4?2:1,x=.83,Re=(e,t,o,n)=>{const{scale:r,width:s,height:l,palette:a}=o,{bgColor:i,fontColor:c,ratio:v,longfgColor:m,shortfgColor:u}=a;e.scale(v,v),e.clearRect(0,0,s,l),e.fillStyle=i,e.fillRect(0,0,s,l);const p=Se(r),f=p*r,h=p*10,y=h*r,_=Math.floor(t/p)*p,S=Math.floor(t/h)*h,R=(_-t)/p*f,C=(S-t)/h*y,B=t+Math.ceil((n?s:l)/r);e.beginPath(),e.fillStyle=c,e.strokeStyle=m;for(let k=S,O=0;k<B;k+=h,O++){const z=C+O*y+.5;n?e.moveTo(z,0):e.moveTo(0,z),e.save(),n?e.translate(z,l*.4):e.translate(s*.4,z),n||e.rotate(-Math.PI/2),e.scale(x/v,x/v),e.fillText(k.toString(),4*v,7*v),e.restore(),n?e.lineTo(z,l*9/16):e.lineTo(s*9/16,z)}e.stroke(),e.closePath(),e.beginPath(),e.strokeStyle=u;for(let k=_,O=0;k<B;k+=p,O++){const z=R+O*f+.5;n?e.moveTo(z,0):e.moveTo(0,z),k%h!=0&&(n?e.lineTo(z,l*1/4):e.lineTo(s*1/4,z))}e.stroke(),e.closePath(),e.setTransform(1,0,0,1,0,0)},Ce=W({name:"CanvasRuler",props:{showIndicator:Boolean,valueNum:Number,vertical:Boolean,start:Number,width:Number,height:Number},emits:["onAddLine","update:showIndicator","update:valueNum"],setup(e,{emit:t}){const o=Y("sketch"),{ratio:n,palette:r}=o,s=M({canvasContext:null}),l=d(null);P(()=>{a(),i(),c()});const a=()=>{s.canvasContext=l.value&&l.value.getContext("2d")},i=()=>{if(l.value){l.value.width=e.width*n,l.value.height=e.height*n;const m=s.canvasContext;m&&(m.font=`${12*n}px -apple-system,
                "Helvetica Neue", ".SFNSText-Regular",
                "SF UI Text", Arial, "PingFang SC", "Hiragino Sans GB",
                "Microsoft YaHei", "WenQuanYi Zen Hei", sans-serif`,m.lineWidth=1,m.textBaseline="middle")}},c=()=>{console.log(o.scale," canvas.value");const m={scale:o.scale,width:e.width,height:e.height,palette:r};s.canvasContext&&Re(s.canvasContext,e.start,m,!e.vertical)};return E(()=>e.start,()=>c()),E([()=>e.width,()=>e.height],()=>{i(),c()}),{handle:(m,u)=>{const p=(y,_,S)=>Math.round(_+y/S),f=e.vertical?m.offsetY:m.offsetX,h=p(f,e.start,o.scale);switch(u){case"click":t("onAddLine",h);break;case"enter":t("update:valueNum",h),t("update:showIndicator",!0);break;default:t("update:valueNum",h);break}},canvas:l}}});function be(e,t,o,n,r,s){return b(),$("canvas",{ref:"canvas",class:"ruler",onClick:t[0]||(t[0]=l=>e.handle(l,"click")),onMouseenter:t[1]||(t[1]=l=>e.handle(l,"enter")),onMousemove:t[2]||(t[2]=l=>e.handle(l,"move")),onMouseleave:t[3]||(t[3]=l=>e.$emit("update:showIndicator",!1))},null,544)}var ze=N(Ce,[["render",be]]);const $e=W({name:"RulerWrapper",components:{CanvasRuler:ze,RulerLine:_e},props:{vertical:Boolean,width:Number,height:{type:Number},start:{type:Number,default:0},lines:{type:Array,default:()=>[]}},setup(e){const t=Y("sketch"),{palette:o,thick:n}=t,r=d(!1),s=d(0),l=w(()=>e.vertical?"v-container":"h-container"),a=w(()=>{const u={width:`calc(100% - ${n}px)`,height:`${n+1}px`,left:`${n}px`},p={width:`${n&&n+1}px`,height:`calc(100% - ${n}px)`,top:`${n}px`};return e.vertical?p:u}),i=w(()=>{const u=(s.value-e.start)*t.scale;let p="top",f="borderLeft";return p=e.vertical?"top":"left",f=e.vertical?"borderBottom":"borderLeft",{[p]:u+"px",[f]:`1px solid ${o==null?void 0:o.lineColor}`}}),c=u=>{e.lines.push(u)},v=(u,p)=>{const f=u-e.start,h=(e.vertical?e.height:e.width)/t.scale;f<0||f>h?m(p):e.lines[p]=u},m=u=>{e.lines.splice(u,1)};return{injectObj:t,showIndicator:r,valueNum:s,rwClassName:l,rwStyle:a,indicatorStyle:i,handleNewLine:c,handleLineRelease:v,handleLineRemove:m}}}),ke={class:"lines"},Le={class:"value"};function Ie(e,t,o,n,r,s){const l=T("CanvasRuler"),a=T("RulerLine");return b(),$("div",{class:U(e.rwClassName),style:L(e.rwStyle)},[I(l,{vertical:e.vertical,width:e.width,height:e.height,start:e.start,valueNum:e.valueNum,"onUpdate:valueNum":t[0]||(t[0]=i=>e.valueNum=i),showIndicator:e.showIndicator,"onUpdate:showIndicator":t[1]||(t[1]=i=>e.showIndicator=i),onOnAddLine:e.handleNewLine},null,8,["vertical","width","height","start","valueNum","showIndicator","onOnAddLine"]),D(g("div",ke,[(b(!0),$(F,null,ce(e.lines,(i,c)=>(b(),ue(a,{key:i+c,index:c,value:i>>0,start:e.start,vertical:e.vertical,onOnRemove:e.handleLineRemove,onOnRelease:e.handleLineRelease},null,8,["index","value","start","vertical","onOnRemove","onOnRelease"]))),128))],512),[[j,e.injectObj.isShowReferLine]]),D(g("div",{class:"indicator",style:L(e.indicatorStyle)},[g("div",Le,A(e.valueNum),1)],4),[[j,e.showIndicator]])],6)}var Ne=N($e,[["render",Ie],["__scopeId","data-v-54b7bd8a"]]);const Oe={scale:{type:Number,default:1},ratio:{type:Number,default:1},thick:{type:Number,default:16},palette:Object,startX:{type:Number,default:0},startY:{type:Number,default:0},width:{type:Number,default:200},height:{type:Number,default:200},lines:{type:Object,default:()=>({h:[],v:[]})},cornerActive:{type:Boolean,default:!1},isShowReferLine:{type:Boolean,default:!0}},Te=e=>{function t(n,r){return Object.keys(n).forEach(s=>{s&&n.hasOwnProperty(s)&&(typeof r.key=="object"?n[s]=t(n[s],r[s]):r.hasOwnProperty(s)&&(n[s]=r[s]))}),n}return t({bgColor:"rgba(225,225,225, 0)",longfgColor:"#BABBBC",shortfgColor:"#C8CDD0",fontColor:"#7D8694",lineColor:"#EB5648",borderColor:"#DADADC",cornerActiveColor:"rgb(235, 86, 72, 0.6)",menu:{bgColor:"#fff",dividerColor:"#DBDBDB",listItem:{textColor:"#415058",hoverTextColor:"#298DF8",disabledTextColor:"rgba(65, 80, 88, 0.4)",bgColor:"#fff",hoverBgColor:"#F2F2F2"}}},e||{})};const Be=W({name:"SketchRule",components:{RulerWrapper:Ne},props:Oe,emits:["onCornerClick","handleLine"],setup(e,{emit:t}){const o=Te(e.palette),n=w(()=>e.cornerActive?" active":""),r=w(()=>({backgroundColor:o.bgColor,width:e.thick+"px",height:e.thick+"px",borderRight:`1px solid ${o.borderColor}`,borderBottom:`1px solid ${o.borderColor}`})),s=a=>{console.log(o),t("onCornerClick",a)},l=M({thick:e.thick,palette:o,ratio:e.ratio,scale:w(()=>e.scale),isShowReferLine:e.isShowReferLine});return G("sketch",de(l)),{cornerActiveClass:n,cornerStyle:r,onCornerClick:s}}}),We={id:"mb-ruler",class:"style-ruler mb-ruler"};function Me(e,t,o,n,r,s){const l=T("RulerWrapper");return b(),$("div",We,[I(l,{vertical:!1,width:e.width,height:e.thick,start:e.startX,lines:e.lines.h},null,8,["width","height","start","lines"]),I(l,{vertical:!0,width:e.thick,height:e.height,start:e.startY,lines:e.lines.v},null,8,["width","height","start","lines"]),g("a",{class:U(["corner",e.cornerActiveClass]),style:L(e.cornerStyle),onClick:t[0]||(t[0]=(...a)=>e.onCornerClick&&e.onCornerClick(...a))},null,6)])}var X=N(Be,[["render",Me]]);function Xe(e){const t=d(!1),o=d(0),n=d(0),r=d(0),s=d(0),l=d(0),a=d(0),i=d(0),c=d(0),v=d(0),m=d(0);return E(e,(u,p,f)=>{const h=_=>{const{width:S,height:R,x:C,y:B}=u.getBoundingClientRect(),k=document.body.scrollTop||document.documentElement.scrollTop,O=document.body.scrollLeft||document.documentElement.scrollLeft;o.value=_.pageX,n.value=_.pageY,v.value=O+C,m.value=k+B,l.value=S,a.value=R,t.value=!1,r.value=C,s.value=B,i.value=r.value+S+O,c.value=s.value+R+k,o.value>r.value&&n.value>s.value&&o.value<i.value&&n.value<c.value&&(t.value=!0)},y=_=>{t.value=!1};u==null||u.addEventListener("mousemove",h),u==null||u.addEventListener("mouseleave",y),f(()=>{u==null||u.removeEventListener("mousemove",h),u==null||u.removeEventListener("mouseleave",y)})},{immediate:!0}),{x:o,y:n,eleX:r,eleY:s,width:l,height:a,eleRightX:i,eleRightY:c,isInside:t,offsetLeft:v,offsetTop:m}}function Ye(e){let t=e.offsetTop,o=e.offsetLeft;for(;e.offsetParent;){const n=e.offsetParent;e=n,t+=n.offsetTop,o+=n.offsetLeft}return{offsetTop:t,offsetLeft:o}}function ee(e){const t=d(0),o=d(0),n=d(0),r=d(0),s=d(0),l=d(0);return E(e,(a,i)=>{if(a){document.body.scrollTop||document.documentElement.scrollTop,document.body.scrollLeft||document.documentElement.scrollLeft;const c=a.getBoundingClientRect(),v=Ye(a);n.value=c.x,r.value=c.y,t.value=c.width,o.value=c.height,s.value=v.offsetTop,l.value=v.offsetLeft}},{immediate:!0}),{width:t,height:o,eleX:n,eleY:r,elOffsetTop:s,elOffsetLeft:l}}const Ee={props:["previewImg"],components:{},setup(){const e=d(null),t=d(null),{offsetLeft:o,offsetTop:n,isInside:r,width:s,height:l,x:a,y:i}=Xe(t),{prveiwInfo:c,followSize:v,prevSize:m,draggleRate:u}=Y("magnify"),p=w(()=>{const{width:h,height:y}=ee(e),_=s.value-h.value,S=l.value-y.value;let R=a.value-o.value-h.value/2,C=i.value-n.value-y.value/2;return R=R>0?Math.min(R,_):0,C=C>0?Math.min(C,S):0,c.followX=R,c.followY=C,c.followW=h.value,c.followH=y.value,c.followMaxX=_,c.followMaxY=S,{width:v.value.w+"px",height:v.value.h+"px",left:R+"px",top:C+"px"}}),f=w(()=>({width:u*m.w+"px",height:u*m.h+"px"}));return{offsetLeft:o,offsetTop:n,x:a,y:i,isInside:r,followRef:e,followStyle:p,previewWarrperRef:t,wrapperStyle:f}}},De=g("i",null,null,-1),je=[De];function Pe(e,t,o,n,r,s){return b(),$("div",{class:"vue-magnify-preview",style:L(n.wrapperStyle),ref:"previewWarrperRef"},[Q(e.$slots,"default"),D(g("span",{class:"follow-unit",style:L(n.followStyle),ref:"followRef"},je,4),[[j,n.isInside]])],4)}var Ae=N(Ee,[["render",Pe]]);const Fe={props:["zoomImg"],setup(){const{prveiwInfo:e,setZoomImgInfo:t,zoomSize:o}=Y("magnify"),n=d(null),r=d(null),s=w(()=>{const{width:l,height:a}=ee(n),i=e.followX/e.followMaxX,c=e.followY/e.followMaxY;return M({scaleX:i,scaleY:c,width:l,height:a})});return P(()=>{r.value&&r.value.addEventListener("load",function(){t({w:this.width,h:this.height})})}),E(s,l=>{n.value&&r.value&&n.value.scrollTo(l.scaleX*Math.abs(o.w-r.value.width),l.scaleY*Math.abs(o.h-r.value.height))}),{prveiwInfo:e,scaleInfo:s,zoomRef:n,imgRef:r,zoomSize:o}}},He=["src"];function Ve(e,t,o,n,r,s){return b(),$("div",{class:"vue-magnify-zoom",ref:"zoomRef",style:L({width:n.zoomSize.w+"px",height:n.zoomSize.h+"px",right:-n.zoomSize.w-3+"px"})},[g("img",{src:o.zoomImg,ref:"imgRef"},null,8,He)],4)}var qe=N(Fe,[["render",Ve]]);const Ke=W({name:"sketch-ruler-wrapper",props:{previewImg:{type:String,required:!0},zoomImg:{type:String,required:!0},prevSize:{type:Object,default:()=>({width:450,height:450})},zoomSize:{type:Object,default:()=>null},draggleRate:{type:Number,default:.3}},emits:["on-preview-click"],components:{MagnifyPreview:Ae,MagnifyZoom:qe},setup(e,{emit:t}){const o=M({followX:0,followY:0,followW:0,followH:0,followMaxX:0,followMaxY:0}),n=M({w:0,h:0}),r=i=>{n.w=i.w,n.h=i.h},s=w(()=>({w:100,h:100})),l=w(()=>({width:e.prevSize.w+"px",height:e.prevSize.h+"px"}));return G("magnify",{prveiwInfo:o,setZoomImgInfo:r,prevSize:e.prevSize,followSize:s,zoomSize:e.zoomSize,draggleRate:e.draggleRate}),{handleClick:i=>{t("on-preview-click",i)},prveiwInfo:o,zoomImgSize:n,followSize:s,previewStyle:l}}});function Ze(e,t,o,n,r,s){const l=T("magnify-preview"),a=T("magnify-zoom");return b(),$("section",{class:"vue-magnify",style:L(e.previewStyle)},[I(l,{onClick:e.handleClick},{default:H(()=>[Q(e.$slots,"default")]),_:3},8,["onClick"]),I(a,{"zoom-img":e.zoomImg},null,8,["zoom-img"])],4)}var te=N(Ke,[["render",Ze]]);X.install=e=>{e.component(X.name,X)};te.install=e=>{e.component(X.name,X)};const V=W({name:"user-ruler-wrapper",components:{SketchRuleWrapper:te},setup(){const e=M({zoomSize:{w:window.innerWidth-400,h:window.innerHeight-300},draggleRate:.3,prevSize:{w:window.innerWidth-400,h:window.innerHeight-300},scale:1,lines:{h:[433,588],v:[33,143]},thick:20,isShowRuler:!0,isShowReferLine:!0}),t=w(()=>e.prevSize.w+22+"px"),o=w(()=>e.prevSize.h+22+"px");return{wrapperwithpx:t,wrapperheightpx:o,state:e,previewImg:pe,zoomImg:J,handleClick:r=>{console.log(r)}}}}),oe=()=>{fe(e=>({"5d82b604":e.wrapperwithpx,"7f87c51f":e.wrapperheightpx}))},ne=V.setup;V.setup=ne?(e,t)=>(oe(),ne(e,t)):oe;const Ue=V,Ge={class:"home"},Qe=["src"];function Je(e,t,o,n,r,s){const l=T("SketchRuleWrapper");return b(),$("div",Ge,[I(l,{zoomSize:e.state.zoomSize,prevSize:e.state.prevSize,class:"wrapper",draggleRate:e.state.draggleRate,"preview-img":e.previewImg,"zoom-img":e.zoomImg,onOnPreviewClick:e.handleClick},{default:H(()=>[g("img",{class:"imhhhh",src:e.previewImg},null,8,Qe)]),_:1},8,["zoomSize","prevSize","draggleRate","preview-img","zoom-img","onOnPreviewClick"])])}var xe=N(Ue,[["render",Je],["__scopeId","data-v-65d11233"]]),et="./assets/onepuls8-pro-zoom.2f29803b.jpg";const re=600,se=320,tt=W({components:{SketchRule:X,RulertsWrapper:xe},setup(){const e=d(null),t=d(null),o=M({zoomSize:{w:window.innerWidth-400,h:window.innerHeight-300},draggleRate:.3,prevSize:{w:window.innerWidth-400,h:window.innerHeight-300},scale:2,startX:0,startY:0,lines:{h:[433,588],v:[33,143]},thick:20,isShowRuler:!0,isShowReferLine:!0}),n=w(()=>({x:0,y:0,width:re,height:se})),r=w(()=>({width:re,height:se,transform:`scale(${o.scale})`})),s=()=>{const a=document.querySelector("#screens").getBoundingClientRect(),i=document.querySelector("#canvas").getBoundingClientRect(),c=(a.left+o.thick-i.left)/o.scale;console.log(c,"startX");const v=(a.top+o.thick-i.top)/o.scale;o.startX=c,o.startY=v};return{zoomImg:J,previewImg:et,screensRef:e,containerRef:t,state:o,shadow:n,canvasStyle:r,handleWheel:a=>{if(a.ctrlKey||a.metaKey){a.preventDefault();const i=parseFloat(Math.max(.2,o.scale-a.deltaY/500).toFixed(2));o.scale=i}he(()=>{s()})},handleScroll:s}}}),ot={class:"top"},nt={class:"wrapper"},rt={ref:"containerRef",class:"screen-container"},st=["src"];function lt(e,t,o,n,r,s){const l=T("SketchRule"),a=T("SketchRuleWrapper");return b(),$(F,null,[g("div",ot,"\u7F29\u653E\u6BD4\u4F8B:"+A(e.state.scale),1),g("div",nt,[I(l,{thick:e.state.thick,scale:e.state.scale,width:1380,height:780,"start-x":e.state.startX,"start-y":e.state.startY,shadow:e.shadow,"corner-active":!0,lines:e.state.lines},null,8,["thick","scale","start-x","start-y","shadow","lines"]),g("div",{id:"screens",ref:"screensRef",onWheel:t[0]||(t[0]=(...i)=>e.handleWheel&&e.handleWheel(...i)),onScroll:t[1]||(t[1]=(...i)=>e.handleScroll&&e.handleScroll(...i))},[g("div",rt,[I(a,{zoomSize:e.state.zoomSize,prevSize:e.state.prevSize,class:"wrapper",draggleRate:e.state.draggleRate,"preview-img":e.previewImg,"zoom-img":e.zoomImg},{default:H(()=>[g("img",{class:"imhhhh",src:e.previewImg},null,8,st)]),_:1},8,["zoomSize","prevSize","draggleRate","preview-img","zoom-img"])],512)],544)])],64)}var at=N(tt,[["render",lt]]);const it=g("div",null,[g("a",{href:"https://data.avuejs.com/build/1",target:"_blank",class:"redlink"}," \u5B9E\u4F8B\u5730\u5740:https://data.avuejs.com/build/1 "),g("div",null,"\u6309\u4F4FCtril+\u9F20\u6807\u6EDA\u8F6E\u53EF\u4EE5\u7F29\u653E\u9875\u9762")],-1),ct={setup(e){return(t,o)=>(b(),$(F,null,[it,I(at)],64))}},ut=ve(ct);ut.mount("#app");
